<!doctype html>
<html lang="mr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>‡§Ü‡§ú‡§ö‡•á ‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó ‚Äî OmKarmyog</title>

<!-- FONTS -->
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700;800&family=Noto+Sans+Devanagari:wght@400;600;700;900&family=Arya:wght@700&display=swap" rel="stylesheet">

<!-- HTML2CANVAS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
  :root{
    --max-w:1080px;
    --cream:#fff9f1;
    --maroon:#4e0f0f;
    --gold:#ffd54a;
    --accent:#c62828;
    --blue1:#1565c0;
    --blue2:#0d47a1;
    --muted:#6b6b6b;
  }

  *{box-sizing:border-box;margin:0;padding:0}
  body{
    font-family:'Noto Sans Devanagari',sans-serif;
    background:#eef2f1;
    display:flex;
    justify-content:center;
    padding:14px;
  }

  .page{width:100%;max-width:var(--max-w)}

  /* USER INPUT PANEL */
  .input-panel{
    background:#fff;border-radius:12px;padding:16px;margin-bottom:16px;
    box-shadow:0 10px 30px rgba(0,0,0,.08);
  }
  .input-panel h2{
    font-size:20px;font-weight:900;margin-bottom:10px;color:#222;
  }
  .ipt-row{display:flex;flex-wrap:wrap;gap:16px}

  .ipt-box{flex:1;min-width:240px}
  label{font-weight:700;margin-bottom:4px;display:block}
  input[type="text"], input[type="tel"], input[type="file"]{
    width:100%;padding:10px;font-size:15px;border:2px solid #eee;border-radius:8px;
  }
  #preview{width:120px;height:120px;margin-top:8px;border-radius:8px;border:3px solid var(--accent);object-fit:cover;display:none}

  .btn-apply{
    background:linear-gradient(135deg,var(--accent),#9c2020);
    color:#fff;border:0;padding:12px;font-weight:900;border-radius:8px;margin-top:8px;cursor:pointer;
  }

  /* CARD */
  #panchangCard{
    background:var(--cream);
    border-radius:12px;
    overflow:hidden;
    box-shadow:0 24px 50px rgba(0,0,0,.16);
  }

.top-header{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    padding:12px 18px;        /* 20px ‚Üí 12px (height ‡§ï‡§Æ‡•Ä) */
    background:#fff;
    border-bottom:6px solid var(--gold);
    position:relative;
}
.left-info{max-width:42%}

.title{
    font-family:'Baloo 2';
    font-size:30px;           /* 34px ‚Üí 30px (looks same, less height) */
    font-weight:800;
    color:#0b2b3a;
    line-height:1.15;         /* height ‡§ï‡§Æ‡•Ä */
}
.date{
    font-size:19px;           /* 22px ‚Üí 19px */
    font-weight:900;
    color:var(--accent);
    margin-top:4px;
}
.day{
    font-size:16px;           /* 18px ‚Üí 16px */
    font-weight:700;
    color:var(--accent);
    margin-top:2px;
}

.ganesh-center{
    width:150px;              /* thoda mota (120 ‚Üí 150) */
    margin:0 auto;            /* EXAACT HORIZONTAL CENTER */
    padding:10px;             /* neat white padding */
    background:#fff;          /* white box */
    border-radius:12px;
    display:flex;             /* proper centering */
    justify-content:center;
    align-items:center;       /* EXACT vertical centering */
    position:relative;        /* NO ABSOLUTE ‚Üí NO OVERLAP */
    top:0;
}

.ganesh-center img{
    width:100%;
    height:auto;
    object-fit:contain;
    display:block;
}



.logo-right{
    width:120px;              /* 140px ‚Üí 120px */
    display:flex;
    align-items:flex-start;
    justify-content:flex-end;
    margin-right:-10px;       /* look same but less width */
}
.logo-right img{
    max-width:120px;
}


  /* SHALIVAHAN */
  .shalivahan{
    background:linear-gradient(180deg,var(--accent),#8c1c1c);color:#fff;
    padding:16px;text-align:center;border-bottom:6px solid var(--gold)
  }
 .shalivahan h3{
    font-family:'Baloo 2';
    font-size:20px;          /* 28 ‚Üí 22 */
    font-weight:900;
    margin-bottom:4px;
    line-height:1.1;         /* height ‡§ï‡§Æ‡•Ä */
}

.shalivahan p{
    font-size:16px;          /* 20 ‚Üí 18 */
    font-weight:700;
    margin:0;
    line-height:1.1;         /* ‡§¶‡•ã‡§®‡•ç‡§π‡•Ä height match */
    opacity:0.95;
}


  /* SUN BOX */
  .sun-row{
    display:flex;justify-content:center;gap:12px;padding:14px;
    background:linear-gradient(90deg,var(--blue1),var(--blue2));
    border-bottom:6px solid var(--gold)
  }
 .sun-box{
    display:flex;
    align-items:center;
    gap:10px;
    padding:8px 12px;
    border-radius:40px;
    background:rgba(255,255,255,0.10);
}
.sun-icon{
    width:auto;
    height:auto;
    background:none;
    border-radius:0;
    font-size:24px;
    box-shadow:none;
}
.sun-data{
    display:flex;
    flex-direction:row;
    align-items:center;
    gap:6px;
}
.sun-data h4{
    margin:0;
    color:#fff;
    font-weight:700;
    font-size:16px;
}
.sun-data .time{
    color:var(--gold);
    font-size:20px;
    font-weight:900;
}

/* MOON / RAHUKAL BLACK ROW */
.moon-row{
  display:flex;
  justify-content:center;
  gap:12px;
  padding:14px;
  background:#000;             /* BLACK BACKGROUND */
  border-bottom:6px solid var(--gold);
}

.black-box{
  background:rgba(255,255,255,0.10);
  padding:8px 12px;
  border-radius:40px;
}

.black-box h4{
  color:#fff;
}

.black-box .time{
  color:var(--gold);
  font-weight:900;
  font-size:20px;
}

  
/* TABLE */
.table-section{padding:12px 14px;background:#fffdf8}
.p-table{width:100%;border-collapse:collapse;font-weight:700}

.p-table td{
    padding:6px 6px;
    font-size:15px;
    line-height:1.15;
    border-bottom:1px dashed #f1d7b2;
}

.event{width:18%;color:#666}
.info{width:40%}
.
 time{width:22%;color:var(--accent);font-weight:900;text-align:center}
.next{width:12%;text-align:center;color:#444}

  /* RASHI */
 .rashi-section{
    display:flex;
    gap:10px;              /* 12 ‚Üí 10 */
    padding:10px 14px;     /* 16 ‚Üí 10 */
    background:#fff;
}

.rashi-card{
    flex:1;
    background:#fff;
    border:2px solid #ffb300;
    border-radius:10px;
    padding:10px 12px;
    display:flex;                /* horizontal layout */
    align-items:center;
    gap:10px;                    /* icon-text gap */
    box-shadow:0 6px 16px rgba(0,0,0,.05);
}

/* icon left side */
.rashi-card .icon{
    font-size:22px;              /* ‡§•‡•ã‡§°‡§Ç ‡§õ‡•ã‡§ü‡§Ç */
    margin:0;
    padding:0;
}

/* label + value together = text column */
.rashi-text-block{
    display:flex;
    flex-direction:column;
    line-height:1.2;
}

/* Label */
.rashi-card .label{
    color:#0d47a1;     /* Dark Blue */
    font-size:12px;
    margin:0;
    padding:0;
}

/* Value */
.rashi-card .val{
    font-size:16px;
    color:var(--accent);
    font-weight:900;
    margin-top:2px;
}



  /* DIN VISHESH */
  .din-box{
    margin:16px;padding:14px;font-weight:900;
    background:#fff8e6;border:2px solid #e4b236;border-radius:8px;display:none
  }

  /* FOOTER (INSIDE IMAGE) */
  .footer{
    display:flex;justify-content:space-between;align-items:center;
    padding:20px;background:linear-gradient(90deg,#4e0f0f,#3f0c0c);color:#fff;border-top:6px solid var(--gold)
  }

  #footer_name{
    font-family:'Arya';
    font-size:30px;color:var(--gold);font-weight:900;
  }
  .footer-left div{margin-top:6px;font-size:18px}

  #footer_img{
    width:240px;height:280px;border-radius:10px;border:6px solid var(--gold);
    object-fit:cover;display:none;margin-right:-20px;
  }

  /* DOWNLOAD BUTTON UNDER CARD */
  #downloadFab{
    width:100%;margin-top:20px;padding:16px;border:0;border-radius:10px;
    background:linear-gradient(135deg,var(--accent),#8c1b1b);
    color:#fff;font-size:20px;font-weight:900;cursor:pointer;
    box-shadow:0 10px 30px rgba(0,0,0,.2)
  }
</style>
</head>

<body>
<div class="page">

  <!-- USER INPUT PANEL -->
  <div class="input-panel">
    <h2>üìã ‡§Ü‡§™‡§≤‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§≠‡§∞‡§æ</h2>

    <div class="ipt-row">

      <div class="ipt-box">
        <label>üì∏ ‡§Ü‡§™‡§≤‡§æ ‡§´‡•ã‡§ü‡•ã</label>
        <input id="userFile" type="file" accept="image/*">
        <img id="preview" />
      </div>

      <div class="ipt-box">
        <label>üë§ ‡§Ü‡§™‡§≤‡•á ‡§®‡§æ‡§µ</label>
        <input id="inpName" type="text" placeholder="‡§Ü‡§™‡§≤‡•á ‡§®‡§æ‡§µ">
        
        <label style="margin-top:10px">üè¢ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø / ‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø</label>
        <input id="inpOffice" type="text" placeholder="‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø / ‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø">

        <label style="margin-top:10px">üìç ‡§™‡§§‡•ç‡§§‡§æ</label>
        <input id="inpAddress" type="text" placeholder="‡§™‡§§‡•ç‡§§‡§æ">
      </div>

      <div class="ipt-box">
        <label>üì± ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï</label>
        <input id="inpContact" type="tel" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§à‡§≤ ‡§®‡§Ç‡§¨‡§∞">

        <button class="btn-apply" id="applyBtn">‚úî ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§∞‡§æ</button>
      </div>

    </div>
  </div>


  <!-- PANCHANG CARD -->
  <div id="panchangCard">

    <!-- HEADER -->
    <div class="top-header">
      <div class="left-info">
        <div class="title">‡§Ü‡§ú‡§ö‡•á ‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó</div>
        <div class="date" id="hdrDate">--</div>
        <div class="day" id="hdrDay">--</div>
      </div>

      <div class="ganesh-center">
        <img id="ganesh" src="pngtree-artistic-vinayaka-chavithi-celebrations-for-ganesh-chaturthi-bal-free-transparent-png-image_14089909.png" crossorigin="anonymous">
      </div>

      <div class="logo-right">
        <img id="logo" src="logo.png" crossorigin="anonymous" style="width:150px;">
      </div>
    </div>

    <!-- SHALIVAHAN -->
    <div class="shalivahan">
      <h3 id="shalivahanLine">‡§∂‡§æ‡§≤‡§ø‡§µ‡§æ‡§π‡§® ‡§∂‡§ï‡•á ‡•ß‡•Ø‡•™‡•≠</h3>
      <p id="shalivahanMeta">‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§µ‡§∏‡•Å ‡§®‡§æ‡§Æ ‡§∏‡§Ç‡§µ‡§§‡•ç‡§∏‡§∞, ‡§¶‡§ï‡•ç‡§∑‡§ø‡§£‡§æ‡§Ø‡§®, ‡§∂‡§∞‡§¶‡§ã‡§§‡•Ç, ‡§ï‡§æ‡§∞‡•ç‡§§‡§ø‡§ï ‡§Æ‡§æ‡§∏, ‡§ï‡•É‡§∑‡•ç‡§£ ‡§™‡§ï‡•ç‡§∑</p>
    </div>

    <!-- SUN -->
    <div class="sun-row">
      <div class="sun-box">
        <div class="sun-icon">üåÖ</div>
        <div class="sun-data"><h4>‡§∏‡•Ç‡§∞‡•ç‡§Ø‡•ã‡§¶‡§Ø</h4><div id="sunrise" class="time">--</div></div>
      </div>
      <div class="sun-box">
        <div class="sun-icon">üåÑ</div>
        <div class="sun-data"><h4>‡§∏‡•Ç‡§∞‡•ç‡§Ø‡§æ‡§∏‡•ç‡§§</h4><div id="sunset" class="time">--</div></div>
      </div>
    </div>

    <!-- TABLE -->
    <div class="table-section">
      <table class="p-table">
        <tbody>

          <tr>
            <td class="event">‡§§‡§ø‡§•‡•Ä</td>
            <td class="info" id="tithi">--</td>
            <td class="time" id="tithi_end">--</td>
            <td class="next" id="tithi_next">--</td>
          </tr>

          <tr>
            <td class="event">‡§µ‡§æ‡§∞</td>
            <td class="info" id="vaar">--</td>
            <td class="time" id="vaar_time">--</td>
            <td class="next" id="vaar_sanskrit">--</td>
          </tr>

          <tr>
            <td class="event">‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞</td>
            <td class="info" id="nak">--</td>
            <td class="time" id="nak_end">--</td>
            <td class="next" id="nak_next">--</td>
          </tr>

          <tr>
            <td class="event">‡§Ø‡•ã‡§ó</td>
            <td class="info" id="yog">--</td>
            <td class="time" id="yog_time">--</td>
            <td class="next" id="yog_next">--</td>
          </tr>

          <tr>
            <td class="event">‡§ï‡§∞‡§£</td>
            <td class="info" id="kar">--</td>
            <td class="time" id="kar_end">--</td>
            <td class="next" id="kar_next">--</td>
          </tr>

        </tbody>
      </table>
    </div>

    <!-- RASHIS -->
    <div class="rashi-section">
     <div class="rashi-card">
    <div class="icon">üåô</div>
    <div class="rashi-text-block">
        <div class="label">‡§ö‡§Ç‡§¶‡•ç‡§∞‡§∞‡§æ‡§∂‡•Ä</div>
        <div class="val" id="moon_rashi">--</div>
    </div>
</div>


     <div class="rashi-card">
    <div class="icon">‚òÄÔ∏è</div>
    <div class="rashi-text-block">
        <div class="label">‡§∏‡•Ç‡§∞‡•ç‡§Ø‡§∞‡§æ‡§∂‡•Ä</div>
        <div class="val" id="sun_rashi">--</div>
    </div>
</div>


     <div class="rashi-card">
    <div class="icon">üîÜ</div>
    <div class="rashi-text-block">
        <div class="label">‡§ó‡•Å‡§∞‡•Å‡§∞‡§æ‡§∂‡•Ä</div>
        <div class="val" id="guru_rashi">--</div>
    </div>
</div>

    </div>

    <!-- MOON & RAHUKAL (NEW SECTION) -->
<div class="moon-row">
  <div class="sun-box black-box">
    <div class="sun-icon">üåô</div>
    <div class="sun-data">
      <h4>‡§ö‡§Ç‡§¶‡•ç‡§∞‡•ã‡§¶‡§Ø</h4>
      <div id="moonrise" class="time">--</div>
    </div>
  </div>

  <div class="sun-box black-box">
    <div class="sun-icon">‚è±Ô∏è</div>
    <div class="sun-data">
      <h4>‡§∞‡§æ‡§π‡•Å‡§ï‡§æ‡§≤</h4>
      <div id="rahukaal" class="time">--</div>
    </div>
  </div>
</div>

    
    <!-- DIN VISHESH -->
    <div id="din_vishesh" class="din-box"></div>

    <!-- FOOTER INSIDE IMAGE -->
    <div class="footer">
      <div class="footer-left">
        <div id="footer_name">‡§Ü‡§™‡§≤‡•á ‡§®‡§æ‡§µ</div>
        <div id="footer_office"></div>
        <div id="footer_address"></div>
        <div id="footer_contact"></div>
      </div>

      <img id="footer_img" />
    </div>

  </div>

  <!-- DOWNLOAD BUTTON -->
  <button id="downloadFab">Download Panchang</button>

</div>


<script>
/* -------- PANCHANG DATA LOADING LOGIC -------- */

const LOCAL_JSON="./panchang.json";
const FALLBACK_JSON="https://sanketramdasi264-prog.github.io/panchang/panchang.json";

const daysMR=['‡§∞‡§µ‡§ø‡§µ‡§æ‡§∞','‡§∏‡•ã‡§Æ‡§µ‡§æ‡§∞','‡§Æ‡§Ç‡§ó‡§≥‡§µ‡§æ‡§∞','‡§¨‡•Å‡§ß‡§µ‡§æ‡§∞','‡§ó‡•Å‡§∞‡•Å‡§µ‡§æ‡§∞','‡§∂‡•Å‡§ï‡•ç‡§∞‡§µ‡§æ‡§∞','‡§∂‡§®‡§ø‡§µ‡§æ‡§∞'];

function todayISO(){
  const d=new Date();
  return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`
}

function fmtDate(d=new Date()){
  return `${String(d.getDate()).padStart(2,'0')}-${String(d.getMonth()+1).padStart(2,'0')}-${d.getFullYear()}`
}

async function fetchPanchangJson(){
  try{
    const r=await fetch(LOCAL_JSON,{cache:"no-store"});
    if(r.ok) return await r.json();
  }catch(e){}

  try{
    const r2=await fetch(FALLBACK_JSON,{cache:"no-store"});
    if(r2.ok) return await r2.json();
  }catch(e){}

  return null;
}

async function populatePanchang(){
  const data=await fetchPanchangJson();
  const key=todayISO();
  const now=new Date();

  document.getElementById("hdrDate").textContent=fmtDate(now);
  document.getElementById("hdrDay").textContent=daysMR[now.getDay()];

  if(!data || !data[key]){
    console.warn("Missing panchang",key);
    return;
  }

  const p=data[key];

  if(p.shalivahan) document.getElementById("shalivahanLine").textContent=p.shalivahan;
  if(p.shalivahan_meta) document.getElementById("shalivahanMeta").textContent=p.shalivahan_meta;
document.getElementById("moonrise").textContent = p.moonrise || "--";
document.getElementById("rahukaal").textContent = p.rahukaal || "--";

  document.getElementById("sunrise").textContent=p.sunrise || "--";
  document.getElementById("sunset").textContent=p.sunset || "--";

  const endP=v=> v ? (v+' ‡§™') : '--';
  const nextN=v=> v ? ('‡§®‡§Ç ‚Äî '+v) : '--';

  document.getElementById("tithi").textContent=p.tithi || "--";
  document.getElementById("tithi_end").textContent=endP(p.tithi_end);
  document.getElementById("tithi_next").textContent=nextN(p.tithi_next);

  document.getElementById("vaar").textContent=p.vaar || daysMR[now.getDay()];
  document.getElementById("vaar_time").textContent=p.vaar_time || "--";
  document.getElementById("vaar_sanskrit").textContent=p.vaar_sanskrit || "--";

  document.getElementById("nak").textContent=p.nakshatra || "--";
  document.getElementById("nak_end").textContent=endP(p.nakshatra_end);
  document.getElementById("nak_next").textContent=nextN(p.nakshatra_next);

  document.getElementById("yog").textContent=p.yog || "--";
  document.getElementById("yog_time").textContent=p.yog_time || "--";
  document.getElementById("yog_next").textContent=nextN(p.yog_next);

  document.getElementById("kar").textContent=p.karan || "--";
  document.getElementById("kar_end").textContent=endP(p.karan_end);
  document.getElementById("kar_next").textContent=nextN(p.karan_next);

  document.getElementById("moon_rashi").textContent=p.moon_rashi || "--";
  document.getElementById("sun_rashi").textContent=p.sun_rashi || "--";
  document.getElementById("guru_rashi").textContent=p.guru_rashi || "--";

  if(p.din_vishesh){
    const dv=document.getElementById("din_vishesh");
    dv.textContent="‡§¶‡§ø‡§®‡§µ‡§ø‡§∂‡•á‡§∑: "+p.din_vishesh;
    dv.style.display="block";
  }
}


/* -------- USER INPUT -------- */

const userFile=document.getElementById("userFile");
const preview=document.getElementById("preview");

userFile.addEventListener("change",e=>{
  const f=e.target.files[0];
  if(!f) return;
  const r=new FileReader();
  r.onload=()=>{
    preview.src=r.result;
    preview.style.display="block";
    document.getElementById("footer_img").src=r.result;
    document.getElementById("footer_img").style.display="block";
  };
  r.readAsDataURL(f);
});

document.getElementById("applyBtn").addEventListener("click",()=>{
  const name=document.getElementById("inpName").value.trim();
  const office=document.getElementById("inpOffice").value.trim();
  const addr=document.getElementById("inpAddress").value.trim();
  const contact=document.getElementById("inpContact").value.trim();

  if(name) document.getElementById("footer_name").textContent=name;
  if(office) document.getElementById("footer_office").textContent=office;
  if(addr) document.getElementById("footer_address").textContent=addr;
  if(contact) document.getElementById("footer_contact").textContent="‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï: "+contact;

  const btn=document.getElementById("applyBtn");
  btn.textContent="‡§≤‡§æ‡§ó‡•Ç ‡§ù‡§æ‡§≤‡•á ‚úì";
  setTimeout(()=>btn.textContent="‚úî ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§∞‡§æ",1200);
});


/* -------- DOWNLOAD PNG -------- */

async function generatePNG(){
  const el=document.getElementById("panchangCard");
  await new Promise(res=>setTimeout(res,200));

  return html2canvas(el,{
    scale:1,
    useCORS:true,
    allowTaint:true,
    backgroundColor:"#ffffff"
  });
}

document.getElementById("downloadFab").addEventListener("click",async()=>{
  const canvas=await generatePNG();
  canvas.toBlob(blob=>{
    const url=URL.createObjectURL(blob);
    const a=document.createElement("a");
    a.href=url;
    a.download="panchang.png";
    a.click();
    URL.revokeObjectURL(url);
  });
});


/* INIT */
window.addEventListener("load",populatePanchang);
</script>

</body>
</html>
