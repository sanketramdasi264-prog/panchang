<!doctype html>
<html lang="mr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>‡§Ü‡§ú‡§ö‡•á ‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó ‚Äî OmKarmyog</title>

<!-- FONTS -->
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700;800&family=Noto+Sans+Devanagari:wght@400;600;700;900&family=Arya:wght@700&display=swap" rel="stylesheet">

<!-- HTML2CANVAS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
  :root{
    --max-w:1080px;
    --cream:#fff9f1;
    --maroon:#4e0f0f;
    --gold:#ffd54a;
    --accent:#c62828;
    --blue1:#1565c0;
    --blue2:#0d47a1;
    --muted:#6b6b6b;
  }

  *{box-sizing:border-box;margin:0;padding:0}
  body{
    font-family:'Noto Sans Devanagari',sans-serif;
    background:#eef2f1;
    display:flex;
    justify-content:center;
    padding:13px;
  }

  .page{width:100%;max-width:var(--max-w)}

  /* USER INPUT PANEL */
  .input-panel{
    background:#fff;border-radius:12px;padding:15px;margin-bottom:15px;
    box-shadow:0 10px 30px rgba(0,0,0,.08);
  }
  .input-panel h2{
    font-size:19px;font-weight:900;margin-bottom:9px;color:#222;
  }
  .ipt-row{display:flex;flex-wrap:wrap;gap:15px}

  .ipt-box{flex:1;min-width:240px}
  .ipt-box-small{flex:0 0 auto;min-width:180px}
  label{font-weight:700;margin-bottom:3px;display:block}
  input[type="text"], input[type="tel"], input[type="file"]{
    width:100%;padding:9px;font-size:14px;border:2px solid #eee;border-radius:8px;
  }
  #preview{width:120px;height:120px;margin-top:7px;border-radius:8px;border:3px solid var(--accent);object-fit:cover;display:none}
  
  #kuldeviPreview, #guradevaPreview{
    width:100px;
    height:100px;
    margin-top:7px;
    border-radius:8px;
    border:3px solid var(--gold);
    object-fit:cover;
    display:none;
  }

  .btn-apply{
    background:linear-gradient(135deg,var(--accent),#9c2020);
    color:#fff;border:0;padding:11px;font-weight:900;border-radius:8px;margin-top:7px;cursor:pointer;
  }

  /* CARD */
  #panchangCard{
    background:var(--cream);
    border-radius:12px;
    overflow:hidden;
    box-shadow:0 24px 50px rgba(0,0,0,.16);
  }

  /* NEW HEADER LAYOUT */
  .top-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:11px 17px; 
    background:#fff;
    border-bottom:4px solid var(--gold);
  }

  .deity-frame{
    width:70px;
    height:70px;
    border:3px solid var(--gold);
    border-radius:10px;
    overflow:hidden;
    background:#f5f5f5;
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow:0 4px 12px rgba(0,0,0,0.1);
    flex-shrink:0;
  }

  .deity-frame img{
    width:100%;
    height:100%;
    object-fit:cover;
  }

  /* NEW DATE SECTION */
  .date-section{
    background:#fff;
    padding:8px 17px;
    border-bottom:4px solid var(--gold);
    display:flex;
    justify-content:space-between;
    align-items:center;
  }

  .date-info-left{
    display:flex;
    flex-direction:column;
    gap:4px;
  }

  .panchang-title{
    font-family:'Baloo 2';
    font-size:22px;
    font-weight:700;
    color:#0b2b3a;
    line-height:1;
  }

  .date-display{
    font-size:17px;
    font-weight:700;
    color:var(--accent);
    display:flex;
    align-items:center;
    gap:8px;
  }

  .brand-logo{
    font-family:'Arya';
    font-size:28px;
    color:var(--gold);
    font-weight:900;
    text-shadow:2px 2px 4px rgba(0,0,0,0.2);
    background:linear-gradient(135deg,var(--accent),#8c1c1c);
    padding:8px 20px;
    border-radius:8px;
  }

  /* SHALIVAHAN */
  .shalivahan{
    background:linear-gradient(180deg,var(--accent),#8c1c1c);color:#fff;
    padding:7px;
    text-align:center;
    border-bottom:4px solid var(--gold)
  }
 .shalivahan h3{
    font-family:'Baloo 2';
    font-size:13px;
    font-weight:600;
    margin-bottom:3px;
    line-height:1.1;
}

.shalivahan p{
    font-size:14px;
    font-weight:600;
    margin:0;
    line-height:1.1;
    opacity:0.95;
}

 /* SUN BOX */
.sun-row{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:10px;
  padding:7px 11px;
  background:linear-gradient(90deg,var(--blue1),var(--blue2));
  border-bottom:4px solid var(--gold);
}

.sun-box{
    display:flex;
    align-items:center;
    gap:5px;
    padding:2px 5px; 
    border-radius:22px;
    background:rgba(255,255,255,0.10);
}

.sun-icon{
    font-size:19px; 
}

.sun-data{
    display:flex;
    align-items:center;
    gap:6px;
}

.sun-data h4{
    margin:0;
    color:#fff;
    font-weight:700;
    font-size:13px;
}

.sun-data .time{
    color:var(--gold);
    font-size:15px;
    font-weight:700;
}

/* MOON / RAHUKAL BOX */
.moon-row{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:10px;
  padding:7px 11px;  
  background:#000;
  border-bottom:4px solid var(--gold);
}

.black-box{
  display:flex;
  align-items:center;
  gap:5px;
  padding:2px 5px;
  border-radius:22px;
  background:rgba(255,255,255,0.12);
}

.black-box h4{
  margin:0;
  color:#fff;
  font-weight:700;
  font-size:13px;
}

.black-box .time{
    color:var(--gold);
    font-size:15px;
    font-weight:700;
    white-space:nowrap;
}

  
/* TABLE */
.table-section{
    padding:7px 11px;
    background:#fffdf8;
}

.p-table{
    width:100%;
    border-collapse:collapse;
    font-weight:700;
}

.p-table td{
    padding:5px 3px; 
    font-size:14px;
    line-height:1.25;
    border-bottom:1px dashed #f1d7b2;
}

.event{
    width:20%;
    color:#0d47a1;
    text-align:left;
}

.info{
    width:36%;
    text-align:left;
}

.time{
    width:19%;
    color:var(--accent);
    font-weight:600;
    text-align:center;
}

.next{
    width:25%;
    text-align:center;
    color:#0d47a1;
}

  /* RASHI */
 .rashi-section{
    display:flex;
    gap:9px;
    padding:5px 11px;
    border-bottom:4px solid var(--gold);
    background:#fff;
}

.rashi-card{
    flex:1;
    background:#fff;
    border:2px solid #ffb300;
    border-radius:10px;
    padding:9px 11px;
    display:flex;
    align-items:center;
    gap:9px;
    box-shadow:0 6px 16px rgba(0,0,0,.05);
}

.rashi-card .icon{
    font-size:21px;
    margin:0;
    padding:0;
}

.rashi-text-block{
    display:flex;
    flex-direction:column;
    line-height:1;
}

.rashi-card .label{
    color:#0d47a1;
    font-size:10px;
    margin:0;
    padding:0;
}

.rashi-card .val{
    font-size:15px;
    color:var(--accent);
    font-weight:700;
    margin-top:2px;
}

  /* DIN VISHESH */
  .din-box{
    margin:7px;
    padding:13px;
    font-weight:700;
    background:#fff8e6;
    border:2px solid #e4b236;
    border-radius:8px;
    display:none
  }

  /* FOOTER INSIDE IMAGE - REDUCED SIZE */
.footer{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:10px 13px; 
    background:linear-gradient(90deg,#4e0f0f,#3b0b0b);
    color:#fff;
    border-top:4px solid var(--gold);
    gap:10px;
}

.footer-left{
    flex:1;
}

#footer_name{
    font-family:'Arya';
    font-size:20px;
    color:var(--gold);
    font-weight:900;
    line-height:1.1;
}

.footer-left div{
    margin-top:2px;
    font-size:13px;
}

#footer_img{
    width:110px;
    height:140px;
    object-fit:cover;
    border-radius:8px;
    border:2px solid var(--gold);
    background:#fff;
    box-shadow:
        0 0 12px rgba(255, 215, 0, 0.70),
        0 0 26px rgba(255, 215, 0, 0.55),
        0 0 40px rgba(255, 215, 0, 0.35),
        0 8px 20px rgba(0,0,0,0.30);
    flex-shrink:0;  
}

  /* DOWNLOAD BUTTON */
  #downloadFab{
    width:100%;
    margin-top:20px;
    padding:15px;
    border:0;
    border-radius:10px;
    background:linear-gradient(135deg,var(--accent),#8c1b1b);
    color:#fff;
    font-size:19px;
    font-weight:900;
    cursor:pointer;
    box-shadow:0 10px 30px rgba(0,0,0,.2)
  }
</style>
</head>
<body>
<div class="page">

  <!-- USER INPUT PANEL -->
  <div class="input-panel">
    <h2>üìã ‡§Ü‡§™‡§≤‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§≠‡§∞‡§æ</h2>

    <div class="ipt-row">

      <div class="ipt-box-small">
        <label>üôè ‡§ï‡•Å‡§≤‡§¶‡•á‡§µ‡•Ä ‡§´‡•ã‡§ü‡•ã</label>
        <input id="kuldeviFile" type="file" accept="image/*">
        <img id="kuldeviPreview" />
      </div>

      <div class="ipt-box-small">
        <label>üïâÔ∏è ‡§ó‡•Å‡§∞‡•Å‡§¶‡•á‡§µ ‡§´‡•ã‡§ü‡•ã</label>
        <input id="guradevaFile" type="file" accept="image/*">
        <img id="guradevaPreview" />
      </div>

      <div class="ipt-box">
        <label>üì∏ ‡§Ü‡§™‡§≤‡§æ ‡§´‡•ã‡§ü‡•ã</label>
        <input id="userFile" type="file" accept="image/*">
        <img id="preview" />
      </div>

      <div class="ipt-box">
        <label>üë§ ‡§Ü‡§™‡§≤‡•á ‡§®‡§æ‡§µ</label>
        <input id="inpName" type="text" placeholder="‡§Ü‡§™‡§≤‡•á ‡§®‡§æ‡§µ">
        
        <label style="margin-top:10px">üè¢ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø / ‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø</label>
        <input id="inpOffice" type="text" placeholder="‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø / ‡§µ‡•ç‡§Ø‡§µ‡§∏‡§æ‡§Ø">

        <label style="margin-top:10px">üìç ‡§™‡§§‡•ç‡§§‡§æ</label>
        <input id="inpAddress" type="text" placeholder="‡§™‡§§‡•ç‡§§‡§æ">
      </div>

      <div class="ipt-box">
        <label>üì± ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï</label>
        <input id="inpContact" type="tel" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§à‡§≤ ‡§®‡§Ç‡§¨‡§∞">

        <button class="btn-apply" id="applyBtn">‚úî ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§∞‡§æ</button>
      </div>

    </div>
  </div>


  <!-- PANCHANG CARD -->
  <div id="panchangCard">

    <!-- HEADER WITH THREE DEITY FRAMES -->
    <div class="top-header">
      <div class="deity-frame">
        <img id="kuldevi_img" src="https://via.placeholder.com/70x70/f5f5f5/999?text=‡§ï‡•Å‡§≤‡§¶‡•á‡§µ‡•Ä" crossorigin="anonymous">
      </div>

      <div class="deity-frame">
        <img id="ganesh" src="https://png.pngtree.com/png-clipart/20230805/original/pngtree-artistic-vinayaka-chavithi-celebrations-for-ganesh-chaturthi-bal-free-transparent-vector-picture-image_7700738.png" crossorigin="anonymous">
      </div>

      <div class="deity-frame">
        <img id="gurudeva_img" src="https://via.placeholder.com/70x70/f5f5f5/999?text=‡§ó‡•Å‡§∞‡•Å‡§¶‡•á‡§µ" crossorigin="anonymous">
      </div>
    </div>

    <!-- NEW DATE SECTION -->
    <div class="date-section">
      <div class="date-info-left">
        <div class="panchang-title">‡§Ü‡§ú‡§ö‡•á ‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó</div>
        <div class="date-display">
          <span id="hdrDate">--</span>
          <span>|</span>
          <span id="hdrDay">--</span>
        </div>
      </div>
      <div class="brand-logo">OmKarmyog</div>
    </div>

    <!-- SHALIVAHAN -->
    <div class="shalivahan">
      <h3 id="shalivahanLine">‡§∂‡§æ‡§≤‡§ø‡§µ‡§æ‡§π‡§® ‡§∂‡§ï‡•á ‡•ß‡•Ø‡•™‡•≠</h3>
      <p id="shalivahanMeta">‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§µ‡§∏‡•Å ‡§®‡§æ‡§Æ ‡§∏‡§Ç‡§µ‡§§‡•ç‡§∏‡§∞, ‡§¶‡§ï‡•ç‡§∑‡§ø‡§£‡§æ‡§Ø‡§®, ‡§∂‡§∞‡§¶‡§ã‡§§‡•Ç, ‡§ï‡§æ‡§∞‡•ç‡§§‡§ø‡§ï ‡§Æ‡§æ‡§∏, ‡§ï‡•É‡§∑‡•ç‡§£ ‡§™‡§ï‡•ç‡§∑</p>
    </div>

    <!-- SUN -->
    <div class="sun-row">
      <div class="sun-box">
        <div class="sun-icon">üåÖ</div>
        <div class="sun-data"><h4>‡§∏‡•Ç‡§∞‡•ç‡§Ø‡•ã‡§¶‡§Ø</h4><div id="sunrise" class="time">--</div></div>
      </div>
      <div class="sun-box">
        <div class="sun-icon">üåÑ</div>
        <div class="sun-data"><h4>‡§∏‡•Ç‡§∞‡•ç‡§Ø‡§æ‡§∏‡•ç‡§§</h4><div id="sunset" class="time">--</div></div>
      </div>
    </div>

    <!-- TABLE -->
    <div class="table-section">
      <table class="p-table">
        <tbody>

          <tr>
            <td class="event">‡§§‡§ø‡§•‡•Ä</td>
            <td class="info" id="tithi">--</td>
            <td class="time" id="tithi_end">--</td>
            <td class="next" id="tithi_next">--</td>
          </tr>

          <tr>
            <td class="event">‡§µ‡§æ‡§∞</td>
            <td class="info" id="vaar">--</td>
            <td class="time" id="vaar_time">--</td>
            <td class="next" id="vaar_sanskrit">--</td>
          </tr>

          <tr>
            <td class="event">‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞</td>
            <td class="info" id="nak">--</td>
            <td class="time" id="nak_end">--</td>
            <td class="next" id="nak_next">--</td>
          </tr>

          <tr>
            <td class="event">‡§Ø‡•ã‡§ó</td>
            <td class="info" id="yog">--</td>
            <td class="time" id="yog_time">--</td>
            <td class="next" id="yog_next">--</td>
          </tr>

          <tr>
            <td class="event">‡§ï‡§∞‡§£</td>
            <td class="info" id="kar">--</td>
            <td class="time" id="kar_end">--</td>
            <td class="next" id="kar_next">--</td>
          </tr>

        </tbody>
      </table>
    </div>

    <!-- RASHIS -->
    <div class="rashi-section">

     <div class="rashi-card">
        <div class="icon">üåô</div>
        <div class="rashi-text-block">
            <div class="label">‡§ö‡§Ç‡§¶‡•ç‡§∞‡§∞‡§æ‡§∂‡•Ä</div>
            <div class="val" id="moon_rashi">--</div>
        </div>
     </div>
      
     <div class="rashi-card">
        <div class="icon">‚òÄÔ∏è</div>
        <div class="rashi-text-block">
            <div class="label">‡§∏‡•Ç‡§∞‡•ç‡§Ø‡§∞‡§æ‡§∂‡•Ä</div>
            <div class="val" id="sun_rashi">--</div>
        </div>
     </div>

     <div class="rashi-card">
        <div class="icon">üîÜ</div>
        <div class="rashi-text-block">
            <div class="label">‡§ó‡•Å‡§∞‡•Å‡§∞‡§æ‡§∂‡•Ä</div>
            <div class="val" id="guru_rashi">--</div>
        </div>
     </div>

    </div>

    <!-- MOON + RAHUKAL -->
    <div class="moon-row">
      <div class="sun-box black-box">
        <div class="sun-icon">üåô</div>
        <div class="sun-data">
          <h4>‡§ö‡§Ç‡§¶‡•ç‡§∞‡•ã‡§¶‡§Ø</h4>
          <div id="moonrise" class="time">--</div>
        </div>
      </div>

      <div class="sun-box black-box">
        <div class="sun-icon">‚è±Ô∏è</div>
        <div class="sun-data">
          <h4>‡§∞‡§æ‡§π‡•Å‡§ï‡§æ‡§≤</h4>
          <div id="rahukaal" class="time">--</div>
        </div>
      </div>
    </div>

    <!-- DIN VISHESH -->
    <div id="din_vishesh" class="din-box"></div>

    <!-- FOOTER (INSIDE CARD) - REDUCED SIZE -->
    <div class="footer">
      <div class="footer-left">
        <div id="footer_name">‡§Ü‡§™‡§≤‡•á ‡§®‡§æ‡§µ</div>
        <div id="footer_office"></div>
        <div id="footer_address"></div>
        <div id="footer_contact"></div>
      </div>
      <img id="footer_img" />
    </div>

  </div>

  <!-- DOWNLOAD BUTTON -->
  <button id="downloadFab">Download Panchang</button>

</div>


<!-- SCRIPT -->
<script>
/* -------- PANCHANG DATA LOADING -------- */

const LOCAL_JSON="./panchang.json";
const FALLBACK_JSON="https://sanketramdasi264-prog.github.io/panchang/panchang.json";

const daysMR=['‡§∞‡§µ‡§ø‡§µ‡§æ‡§∞','‡§∏‡•ã‡§Æ‡§µ‡§æ‡§∞','‡§Æ‡§Ç‡§ó‡§≥‡§µ‡§æ‡§∞','‡§¨‡•Å‡§ß‡§µ‡§æ‡§∞','‡§ó‡•Å‡§∞‡•Å‡§µ‡§æ‡§∞','‡§∂‡•Å‡§ï‡•ç‡§∞‡§µ‡§æ‡§∞','‡§∂‡§®‡§ø‡§µ‡§æ‡§∞'];

function todayISO(){
  const d=new Date();
  return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`
}

function fmtDate(d=new Date()){
  return `${String(d.getDate()).padStart(2,'0')}-${String(d.getMonth()+1).padStart(2,'0')}-${d.getFullYear()}`
}

async function fetchPanchangJson(){
  try{
    const r=await fetch(LOCAL_JSON,{cache:"no-store"});
    if(r.ok) return await r.json();
  }catch(e){}

  try{
    const r2=await fetch(FALLBACK_JSON,{cache:"no-store"});
    if(r2.ok) return await r2.json();
  }catch(e){}

  return null;
}

async function populatePanchang(){
  const data=await fetchPanchangJson();
  const key=todayISO();
  const now=new Date();

  document.getElementById("hdrDate").textContent=fmtDate(now);
  document.getElementById("hdrDay").textContent=daysMR[now.getDay()];

  if(!data || !data[key]){
    console.warn("Missing panchang",key);
    return;
  }

  const p=data[key];

  if(p.shalivahan) document.getElementById("shalivahanLine").textContent=p.shalivahan;
  if(p.shalivahan_meta) document.getElementById("shalivahanMeta").textContent=p.shalivahan_meta;

  document.getElementById("moonrise").textContent = p.moonrise || "--";
  document.getElementById("rahukaal").textContent = p.rahukaal || "--";
  document.getElementById("sunrise").textContent=p.sunrise || "--";
  document.getElementById("sunset").textContent=p.sunset || "--";

  const endP=v=> v ? (v+' ‡§™') : '--';
  const nextN=v=> v ? ('‡§®‡§Ç ‚Äî '+v) : '--';

  document.getElementById("tithi").textContent=p.tithi || "--";
  document.getElementById("tithi_end").textContent=endP(p.tithi_end);
  document.getElementById("tithi_next").textContent=nextN(p.tithi_next);

  document.getElementById('vaar').textContent = p.vaar || daysMR[now.getDay()];
  document.getElementById('vaar_time').textContent = p.vaar_time || '--';
  document.getElementById('vaar_sanskrit').textContent = p.vaar_sanskrit || p.vaarSanskrit || '--';

  document.getElementById("nak").textContent=p.nakshatra || "--";
  document.getElementById("nak_end").textContent=endP(p.nakshatra_end);
  document.getElementById("nak_next").textContent=nextN(p.nakshatra_next);

  document.getElementById("yog").textContent=p.yog || "--";
  document.getElementById("yog_time").textContent=p.yog_time || "--";
  document.getElementById("yog_next").textContent=nextN(p.yog_next);

  document.getElementById("kar").textContent=p.karan || "--";
  document.getElementById("kar_end").textContent=endP(p.karan_end);
  document.getElementById("kar_next").textContent=nextN(p.karan_next);

  document.getElementById("moon_rashi").textContent=p.moon_rashi || "--";
  document.getElementById("sun_rashi").textContent=p.sun_rashi || "--";
  document.getElementById("guru_rashi").textContent=p.guru_rashi || "--";

  if(p.din_vishesh){
    const dv=document.getElementById("din_vishesh");
    dv.textContent="‡§¶‡§ø‡§®‡§µ‡§ø‡§∂‡•á‡§∑: "+p.din_vishesh;
    dv.style.display="block";
  }
}


/* -------- USER INPUT HANDLING -------- */

const kuldeviFile = document.getElementById("kuldeviFile");
const kuldeviPreview = document.getElementById("kuldeviPreview");

kuldeviFile.addEventListener("change", e => {
  const f = e.target.files[0];
  if (!f) return;
  const r = new FileReader();
  r.onload = () => {
    kuldeviPreview.src = r.result;
    kuldeviPreview.style.display = "block";
    document.getElementById("kuldevi_img").src = r.result;
  };
  r.readAsDataURL(f);
});

const guradevaFile = document.getElementById("guradevaFile");
const guradevaPreview = document.getElementById("guradevaPreview");

guradevaFile.addEventListener("change", e => {
  const f = e.target.files[0];
  if (!f) return;
  const r = new FileReader();
  r.onload = () => {
    guradevaPreview.src = r.result;
    guradevaPreview.style.display = "block";
    document.getElementById("gurudeva_img").src = r.result;
  };
  r.readAsDataURL(f);
});

const userFile=document.getElementById("userFile");
const preview=document.getElementById("preview");

userFile.addEventListener("change",e=>{
  const f=e.target.files[0];
  if(!f) return;
  const r=new FileReader();
  r.onload=()=>{
    preview.src=r.result;
    preview.style.display="block";
    document.getElementById("footer_img").src=r.result;
    document.getElementById("footer_img").style.display="block";
  };
  r.readAsDataURL(f);
});

document.getElementById("applyBtn").addEventListener("click",()=>{
  const name=document.getElementById("inpName").value.trim();
  const office=document.getElementById("inpOffice").value.trim();
  const addr=document.getElementById("inpAddress").value.trim();
  const contact=document.getElementById("inpContact").value.trim();

  if(name) document.getElementById("footer_name").textContent=name;
  if(office) document.getElementById("footer_office").textContent=office;
  if(addr) document.getElementById("footer_address").textContent=addr;
  if(contact) document.getElementById("footer_contact").textContent="‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï: "+contact;

  const btn=document.getElementById("applyBtn");
  btn.textContent="‡§≤‡§æ‡§ó‡•Ç ‡§ù‡§æ‡§≤‡•á ‚úì";
  setTimeout(()=>btn.textContent="‚úî ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§∞‡§æ",1200);
});


/* -------- PNG DOWNLOAD -------- */

async function generatePNG(){
  const el=document.getElementById("panchangCard");
  await new Promise(res=>setTimeout(res,200));

  return html2canvas(el,{
    scale:3,
    useCORS:true,
    allowTaint:true,
    backgroundColor:"#ffffff"
  });
}

document.getElementById("downloadFab").addEventListener("click",async()=>{
  const canvas=await generatePNG();
  canvas.toBlob(blob=>{
    const url=URL.createObjectURL(blob);
    const a=document.createElement("a");
    a.href=url;
    a.download="panchang.png";
    a.click();
    URL.revokeObjectURL(url);
  });
});


/* INIT */
window.addEventListener("load",populatePanchang);
</script>

</body>
</html>
