<!doctype html>
<html lang="mr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>‡§Ü‡§ú‡§ö‡•á ‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó ‚Äî OmKarmyog</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700;800&family=Noto+Sans+Devanagari:wght@400;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<style>
  :root{
    --card-w:1080;
    --card-h:1920;
    --cream:#fff9f1;
    --maroon-1:#5a0e0e;
    --gold:#d9a64b;
    --saffron:#e56a2e;
    --blue-1:#1565c0;
    --blue-2:#0d47a1;
    --dark:#0b2b3a;
    --muted:#6d6d6d;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;overflow-x:hidden}
  body{
    background:linear-gradient(180deg,#eef6ec,#e9f0ef);
    font-family:'Noto Sans Devanagari',sans-serif;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:18px;
    overflow-y:auto;
  }

  .page {
    width:100%;
    max-width:1200px;
    display:flex;
    flex-direction:column;
    gap:18px;
    align-items:center;
  }

  /* INPUT PANEL */
  .input-panel{
    width:100%;
    max-width:1200px;
    background:#ffffff;
    border-radius:12px;
    padding:14px;
    box-shadow:0 10px 30px rgba(0,0,0,.08);
    display:flex;
    gap:12px;
    flex-wrap:wrap;
    align-items:center;
  }
  .input-panel input[type="text"],
  .input-panel input[type="tel"],
  .input-panel input[type="file"]{
    padding:10px;
    border:2px solid #e8e8e8;
    border-radius:8px;
    font-size:15px;
  }
  .input-panel .grow{flex:1;min-width:160px}
  .input-panel button{background:linear-gradient(135deg,#d32f2f,#c62828);color:#fff;border:0;padding:12px 18px;border-radius:8px;font-weight:800;cursor:pointer;font-size:15px}
  .input-panel label{font-weight:700;font-size:13px;color:#333;margin-right:6px}
  .input-panel .note{font-size:11px;color:#666;margin-left:6px}

  /* CARD */
  .card-wrap{width:100%;display:flex;justify-content:center}
  #panchangCard{
    width:100%;
    max-width:1080px;
    aspect-ratio: 1080 / 1920;
    background:var(--cream);
    border-radius:10px;
    overflow:hidden;
    box-shadow:0 26px 60px rgba(0,0,0,.28);
    position:relative;
    display:flex;
    flex-direction:column;
  }

  /* Header */
  .top-header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:24px 32px;
    background:#fff;
    border-bottom:6px solid var(--gold);
    position:relative;
    min-height:200px;
  }
  .top-left{
    width:280px;
    z-index:1;
  }
  .title{
    font-family:'Baloo 2';
    font-size:36px;
    font-weight:800;
    color:var(--dark);
    line-height:1.1;
  }
  .top-date{
    font-size:24px;
    font-weight:900;
    color:#c62828;
    margin-top:6px;
  }
  .top-day{
    font-size:20px;
    font-weight:700;
    color:#d32f2f;
    margin-top:4px;
  }

  .ganesh-center{
    position:absolute;
    left:50%;
    top:10px;
    transform:translateX(-50%);
    width:240px;
    height:240px;
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:2;
  }
  .ganesh-center img{
    width:100%;
    height:100%;
    object-fit:contain;
    filter:drop-shadow(0 6px 20px rgba(0,0,0,.3));
  }

  .logo-right{
    width:140px;
    height:100px;
    display:flex;
    align-items:center;
    justify-content:flex-end;
    z-index:1;
  }
  .logo-right img{
    max-width:110px;
    max-height:90px;
    object-fit:contain;
  }

  /* Shalivahan */
  .shalivahan{
    background:linear-gradient(180deg,#c62828,#b71c1c);
    color:#fff;
    text-align:center;
    padding:18px 24px;
    border-bottom:6px solid var(--gold);
  }
  .shalivahan h3{
    font-family:'Baloo 2';
    font-size:28px;
    margin-bottom:6px;
    font-weight:800;
  }
  .shalivahan p{
    font-size:18px;
    margin:0;
    opacity:0.95;
    font-weight:600;
  }

  /* Sunrise/sunset */
  .sun-row{
    display:flex;
    gap:20px;
    justify-content:center;
    padding:16px 14px;
    background:linear-gradient(90deg,var(--blue-1),var(--blue-2));
    border-bottom:6px solid var(--gold);
  }
  .sun-box{
    display:flex;
    align-items:center;
    gap:12px;
    padding:10px 16px;
    border-radius:40px;
    background:rgba(255,255,255,0.08);
  }
  .sun-icon{
    width:56px;
    height:56px;
    background:#fff;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:26px;
    box-shadow:0 4px 12px rgba(0,0,0,.2);
  }
  .sun-info h4{
    color:#fff;
    font-size:13px;
    margin:0;
    font-weight:600;
  }
  .sun-info .time{
    color:var(--gold);
    font-weight:900;
    font-size:20px;
  }

  /* Table */
  .table-section{
    padding:16px;
    background:linear-gradient(180deg,#fff8e6,#ffffff);
  }
  .p-table{
    width:100%;
    border-collapse:collapse;
    border-left:4px solid #ff9800;
    border-right:4px solid #ff9800;
  }
  .p-table tr{
    border-bottom:2px solid #f2d2b0;
  }
  .p-table td{
    padding:14px 8px;
    font-weight:700;
    vertical-align:middle;
    font-size:16px;
  }
  .p-table td.event{
    width:18%;
    color:var(--muted);
    text-align:left;
    padding-left:18px;
  }
  .p-table td.info{
    width:42%;
    text-align:left;
    padding-left:12px;
    font-size:18px;
    font-weight:800;
  }
  .p-table td.time{
    width:20%;
    text-align:center;
    color:#c62828;
    font-weight:900;
    font-size:16px;
  }
  .p-table td.next{
    width:20%;
    text-align:center;
    color:var(--muted);
    font-weight:700;
    font-size:15px;
  }

  /* Rashi */
  .rashi-wrap{
    display:flex;
    gap:14px;
    padding:16px;
    background:#fff;
    justify-content:space-between;
  }
  .rashi{
    flex:1;
    background:#fff;
    border:3px solid #ff9800;
    border-radius:12px;
    padding:16px;
    text-align:center;
    box-shadow:0 6px 18px rgba(0,0,0,.06);
  }
  .rashi .icon{
    font-size:26px;
    margin-bottom:6px;
  }
  .rashi .label{
    color:#666;
    font-size:13px;
    font-weight:600;
  }
  .rashi .val{
    font-size:18px;
    color:#c62828;
    font-weight:900;
  }

  /* Din vishesh */
  .din-box{
    margin:16px;
    padding:12px 16px;
    background:linear-gradient(180deg,#fff8e6,#fff2d9);
    border-radius:10px;
    border:2px solid #e2a92f;
    font-weight:700;
    color:var(--dark);
    font-size:15px;
  }

  /* Footer */
  .footer{
    display:flex;
    gap:16px;
    align-items:center;
    justify-content:space-between;
    padding:20px;
    border-top:6px solid var(--gold);
    background:linear-gradient(90deg,var(--maroon-1),var(--maroon-1));
    color:#fff;
    margin-top:auto;
  }
  .footer-left{
    flex:1;
  }
  .u-name{
    font-family:'Baloo 2';
    font-size:30px;
    color:#ffd84a;
    font-weight:900;
    line-height:1.2;
  }
  .u-office{
    font-size:16px;
    color:#fff;
    margin-top:6px;
    font-weight:700;
  }
  .u-contact{
    font-size:16px;
    color:#fff;
    margin-top:6px;
    font-weight:600;
  }
  .u-address{
    font-size:15px;
    color:#fff;
    margin-top:6px;
    opacity:0.95;
    font-weight:600;
  }
  .footer-photo{
    width:200px;
    height:280px;
    border-radius:12px;
    border:5px solid var(--gold);
    object-fit:cover;
    box-shadow:0 6px 24px rgba(0,0,0,.28);
  }

  /* Responsive */
  @media (max-width:1100px){
    .input-panel{padding:12px;gap:8px}
    #panchangCard{max-width:880px}
    .top-left{width:240px}
    .title{font-size:32px}
    .top-date{font-size:22px}
    .top-day{font-size:18px}
    .ganesh-center{width:220px;height:220px}
  }
  @media (max-width:820px){
    .input-panel{flex-direction:column;align-items:stretch}
    #panchangCard{max-width:640px}
    .top-left{width:200px}
    .title{font-size:28px}
    .top-date{font-size:20px}
    .top-day{font-size:16px}
    .ganesh-center{width:200px;height:200px;top:8px}
    .logo-right{width:120px}
    .logo-right img{max-width:90px;max-height:70px}
    .shalivahan h3{font-size:24px}
    .shalivahan p{font-size:16px}
    .u-name{font-size:26px}
    .footer-photo{width:180px;height:240px}
    .p-table td{font-size:14px;padding:12px 6px}
    .p-table td.info{font-size:16px}
    .p-table td.time{font-size:14px}
  }
  @media (max-width:480px){
    body{padding:12px}
    #panchangCard{max-width:420px}
    .top-header{padding:18px 20px;min-height:160px}
    .top-left{width:160px}
    .title{font-size:24px}
    .top-date{font-size:18px}
    .top-day{font-size:15px}
    .ganesh-center{width:170px;height:170px;top:6px}
    .logo-right{width:100px}
    .logo-right img{max-width:75px;max-height:60px}
    .shalivahan{padding:14px 18px}
    .shalivahan h3{font-size:20px}
    .shalivahan p{font-size:14px}
    .sun-icon{width:48px;height:48px;font-size:22px}
    .sun-info h4{font-size:11px}
    .sun-info .time{font-size:18px}
    .p-table td{font-size:13px;padding:10px 5px}
    .p-table td.info{font-size:15px}
    .p-table td.time{font-size:13px}
    .p-table td.next{font-size:13px}
    .rashi .icon{font-size:22px}
    .rashi .label{font-size:12px}
    .rashi .val{font-size:16px}
    .din-box{font-size:13px;padding:10px 14px}
    .footer{padding:16px}
    .u-name{font-size:22px}
    .u-office{font-size:14px}
    .u-contact{font-size:14px}
    .u-address{font-size:13px}
    .footer-photo{width:150px;height:200px}
  }

  /* Download button */
  .download-btn{
    position:fixed;
    right:18px;
    bottom:18px;
    z-index:9999;
    background:linear-gradient(135deg,#d32f2f,#c62828);
    color:#fff;
    border:none;
    padding:14px 18px;
    border-radius:10px;
    font-weight:800;
    box-shadow:0 8px 28px rgba(0,0,0,.2);
    cursor:pointer;
    font-size:15px;
  }
  .download-btn:hover{
    transform:translateY(-2px);
    box-shadow:0 10px 32px rgba(0,0,0,.25);
  }
</style>
</head>
<body>
  <div class="page">
    <!-- INPUT PANEL -->
    <div class="input-panel" role="region" aria-label="Input panel">
      <div class="grow">
        <label>‡§®‡§æ‡§µ</label><br>
        <input id="nameInput" type="text" placeholder="‡§Ü‡§™‡§≤‡•á ‡§®‡§æ‡§µ" />
      </div>

      <div style="width:200px">
        <label>‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø</label><br>
        <input id="officeInput" type="text" placeholder="‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø" />
      </div>

      <div style="width:160px">
        <label>‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï</label><br>
        <input id="contactInput" type="tel" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§à‡§≤" />
      </div>

      <div style="width:180px">
        <label>‡§™‡§§‡•ç‡§§‡§æ</label><br>
        <input id="addressInput" type="text" placeholder="‡§™‡§§‡•ç‡§§‡§æ" />
      </div>

      <div>
        <label>‡§´‡•ã‡§ü‡•ã</label><br>
        <input id="fileInput" type="file" accept="image/*" />
      </div>

      <div style="min-width:120px;display:flex;flex-direction:column;gap:8px;align-items:flex-end;">
        <button id="applyBtn">Apply</button>
        <div class="note">JSON: <code>panchang.json</code></div>
      </div>
    </div>

    <!-- CARD -->
    <div class="card-wrap">
      <div id="panchangCard" role="main" aria-label="Panchang card">
        <!-- TOP -->
        <div class="top-header">
          <div class="top-left">
            <div class="title">‡§Ü‡§ú‡§ö‡•á ‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó</div>
            <div class="top-date" id="hdrDate">--</div>
            <div class="top-day" id="hdrDay">--</div>
          </div>

          <div class="ganesh-center" aria-hidden="true">
            <img id="ganeshImg" src="https://raw.githubusercontent.com/sanketramdasi264-prog/panchang/main/pngtree-artistic-vinayaka-chavithi-celebrations-for-ganesh-chaturthi-bal-free-transparent-png-image_14089909.png" crossOrigin="anonymous" alt="Ganesh">
          </div>

          <div class="logo-right">
            <img id="logoImg" src="https://blogger.googleusercontent.com/img/a/AVvXsEghUXDnRLeFXsuapWEpRem_Mtzst5Ae9zlttWprP9nI7dQ_Rh41nkHP3PqCiHrZo1YKUiMvbHaPZC6VZEBCSvuAvzQOVF7MxUon4i3Hdko0qGWwyl4BQ44KeAe-6qQACSUB8k-3wdI6N2Bt-8xsQSQnHW-a2AMw9SwT0hK4b5Ej5zmN_anbnY1pX2TC9pwR=s500" crossOrigin="anonymous" alt="Logo">
          </div>
        </div>

        <!-- SHALIVAHAN -->
        <div class="shalivahan">
          <h3 id="shalivahanLine">‡§∂‡§æ‡§≤‡§ø‡§µ‡§æ‡§π‡§® ‡§∂‡§ï‡•á ‡•ß‡•Ø‡•™‡•≠</h3>
          <p id="shalivahanMeta">‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§µ‡§∏‡•Å‡§®‡§æ‡§Æ‡§∏‡§Ç‡§µ‡§§‡•ç‡§∏‡§∞, ‡§¶‡§ï‡•ç‡§∑‡§ø‡§£‡§æ‡§Ø‡§®, ‡§∂‡§∞‡§¶‡§ã‡§§‡•Ç, ‡§ï‡§æ‡§∞‡•ç‡§§‡§ø‡§ï ‡§Æ‡§æ‡§∏, ‡§ï‡•É‡§∑‡•ç‡§£ ‡§™‡§ï‡•ç‡§∑</p>
        </div>

        <!-- SUN -->
        <div class="sun-row">
          <div class="sun-box"><div class="sun-icon">üåÖ</div><div class="sun-info"><h4>‡§∏‡•Ç‡§∞‡•ç‡§Ø‡•ã‡§¶‡§Ø</h4><div id="sunrise" class="time">--:--</div></div></div>
          <div class="sun-box"><div class="sun-icon">üåÑ</div><div class="sun-info"><h4>‡§∏‡•Ç‡§∞‡•ç‡§Ø‡§æ‡§∏‡•ç‡§§</h4><div id="sunset" class="time">--:--</div></div></div>
        </div>

        <!-- TABLE -->
        <div class="table-section">
          <table class="p-table" role="table" aria-label="Panchang details">
            <tbody>
              <tr>
                <td class="event">‡§§‡§ø‡§•‡•Ä</td>
                <td class="info" id="tithiName">--</td>
                <td class="time" id="tithiTime">--</td>
                <td class="next" id="tithiNext">--</td>
              </tr>
              <tr>
                <td class="event">‡§µ‡§æ‡§∞</td>
                <td class="info" id="vaar">--</td>
                <td class="time" id="vaarTime">--</td>
                <td class="next" id="vaarSanskrit">--</td>
              </tr>
              <tr>
                <td class="event">‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞</td>
                <td class="info" id="nakshatra">--</td>
                <td class="time" id="nakshatraTime">--</td>
                <td class="next" id="nakshatraNext">--</td>
              </tr>
              <tr>
                <td class="event">‡§Ø‡•ã‡§ó</td>
                <td class="info" id="yog">--</td>
                <td class="time" id="yogTime">--</td>
                <td class="next" id="yogNext">--</td>
              </tr>
              <tr>
                <td class="event">‡§ï‡§∞‡§£</td>
                <td class="info" id="karan">--</td>
                <td class="time" id="karanTime">--</td>
                <td class="next" id="karanNext">--</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- RASHI -->
        <div class="rashi-wrap">
          <div class="rashi"><div class="icon">üåô</div><div class="label">‡§ö‡§Ç‡§¶‡•ç‡§∞</div><div class="val" id="moonRashi">--</div></div>
          <div class="rashi"><div class="icon">‚òÄÔ∏è</div><div class="label">‡§∏‡•Ç‡§∞‡•ç‡§Ø</div><div class="val" id="sunRashi">--</div></div>
          <div class="rashi"><div class="icon">üîÜ</div><div class="label">‡§ó‡•Å‡§∞‡•Å</div><div class="val" id="guruRashi">--</div></div>
        </div>

        <!-- DIN VISHESH -->
        <div id="dinVishesh" class="din-box" style="display:none"></div>

        <!-- FOOTER -->
        <div class="footer" role="contentinfo">
          <div class="footer-left">
            <div class="u-name" id="footerName">‡§Ü‡§™‡§≤‡•á ‡§®‡§æ‡§µ</div>
            <div class="u-office" id="footerOffice">‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä</div>
            <div class="u-contact" id="footerContact">‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï: --</div>
            <div class="u-address" id="footerAddress"></div>
          </div>
          <div>
            <img id="footerPhoto" class="footer-photo" src="" alt="User Photo" style="display:none">
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
/* CONFIG */
const JSON_LOCAL = './panchang.json';
const JSON_FALLBACK = 'https://sanketramdasi264-prog.github.io/panchang/panchang.json';
const daysMar = ['‡§∞‡§µ‡§ø‡§µ‡§æ‡§∞','‡§∏‡•ã‡§Æ‡§µ‡§æ‡§∞','‡§Æ‡§Ç‡§ó‡§≥‡§µ‡§æ‡§∞','‡§¨‡•Å‡§ß‡§µ‡§æ‡§∞','‡§ó‡•Å‡§∞‡•Å‡§µ‡§æ‡§∞','‡§∂‡•Å‡§ï‡•ç‡§∞‡§µ‡§æ‡§∞','‡§∂‡§®‡§ø‡§µ‡§æ‡§∞'];

/* HELPERS */
function todayISO(){
  const d=new Date(); return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
}
function fmtDate(d=new Date()){
  return `${String(d.getDate()).padStart(2,'0')}-${String(d.getMonth()+1).padStart(2,'0')}-${d.getFullYear()}`;
}

/* LOAD JSON */
async function fetchJson(){
  try{
    const r = await fetch(JSON_LOCAL, {cache:'no-store'});
    if(r.ok) return await r.json();
  }catch(e){/*ignore*/}
  try{
    const r2 = await fetch(JSON_FALLBACK, {cache:'no-store'});
    if(r2.ok) return await r2.json();
  }catch(e){/*ignore*/}
  return null;
}

/* FILL UI */
async function fillPanchang(){
  const data = await fetchJson();
  const key = todayISO();
  const now = new Date();
  document.getElementById('hdrDate').textContent = fmtDate(now);
  document.getElementById('hdrDay').textContent = daysMar[now.getDay()];

  if(!data || !data[key]){
    ['tithiName','tithiTime','tithiNext','vaar','vaarTime','vaarSanskrit','nakshatra','nakshatraTime','nakshatraNext','yog','yogTime','yogNext','karan','karanTime','karanNext','sunrise','sunset','moonRashi','sunRashi','guruRashi'].forEach(id=>{
      const el=document.getElementById(id); if(el) el.textContent='--';
    });
    document.getElementById('dinVishesh').style.display='none';
    console.warn('panchang.json missing for', key);
    return;
  }

  const p = data[key];

  if(p.shalivahan) document.getElementById('shalivahanLine').textContent = p.shalivahan;
  if(p.shalivahan_meta) document.getElementById('shalivahanMeta').textContent = p.shalivahan_meta;

  document.getElementById('sunrise').textContent = p.sunrise || '--';
  document.getElementById('sunset').textContent = p.sunset || '--';

  function endP(val){ return val ? (val + ' ‡§™') : '--'; }
  function nextN(val){ return val ? ('‡§®‡§Ç ' + val) : '--'; }

  document.getElementById('tithiName').textContent = p.tithi || '--';
  document.getElementById('tithiTime').textContent = endP(p.tithi_end || p.tithi_end_raw || p.tithi_end_time);
  document.getElementById('tithiNext').textContent = nextN(p.tithi_next || p.tithiNext);

  document.getElementById('vaar').textContent = p.vaar || daysMar[now.getDay()];
  document.getElementById('vaarTime').textContent = p.vaar_time || '--';
  document.getElementById('vaarSanskrit').textContent = p.vaar_sanskrit || p.vaarSanskrit || '--';

  document.getElementById('nakshatra').textContent = p.nakshatra || '--';
  document.getElementById('nakshatraTime').textContent = endP(p.nakshatra_end);
  document.getElementById('nakshatraNext').textContent = nextN(p.nakshatra_next);

  document.getElementById('yog').textContent = p.yog || '--';
  document.getElementById('yogTime').textContent = p.yog_time || '--';
  document.getElementById('yogNext').textContent = nextN(p.yog_next);

  document.getElementById('karan').textContent = p.karan || p.karana || '--';
  document.getElementById('karanTime').textContent = endP(p.karan_end);
  document.getElementById('karanNext').textContent = nextN(p.karan_next);

  document.getElementById('moonRashi').textContent = p.moon_rashi || p.moonRashi || '--';
  document.getElementById('sunRashi').textContent = p.sun_rashi || p.sunRashi || '--';
  document.getElementById('guruRashi').textContent = p.guru_rashi || p.guruRashi || '--';

  if(p.din_vishesh){
    const dv = document.getElementById('dinVishesh');
    dv.textContent = '‡§¶‡§ø‡§®‡§µ‡§ø‡§∂‡•á‡§∑: ' + p.din_vishesh;
    dv.style.display = 'block';
  } else {
    document.getElementById('dinVishesh').style.display = 'none';
  }
}

/* USER INPUT */
let uploadedImageData = '';
document.getElementById('fileInput').addEventListener('change', e=>{
  const f = e.target.files[0];
  if(!f) return;
  const r = new FileReader();
  r.onload = ()=> uploadedImageData = r.result;
  r.readAsDataURL(f);
});

document.getElementById('applyBtn').addEventListener('click', ()=>{
  const name = document.getElementById('nameInput').value.trim();
  const office = document.getElementById('officeInput').value.trim();
  const contact = document.getElementById('contactInput').value.trim();
  const address = document.getElementById('addressInput').value.trim();

  document.getElementById('footerName').textContent = name || '‡§Ü‡§™‡§≤‡•á ‡§®‡§æ‡§µ';
  document.getElementById('footerOffice').textContent = office || '';
  document.getElementById('footerContact').textContent = contact ? ('‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï: ' + contact) : '‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï: --';
  document.getElementById('footerAddress').textContent = address ? ('‡§™‡§§‡•ç‡§§‡§æ: ' + address) : '';

  if(uploadedImageData){
    const fp = document.getElementById('footerPhoto');
    fp.src = uploadedImageData;
    fp.style.display = 'block';
  }
});

/* DOWNLOAD */
async function downloadImage(){
  document.getElementById('applyBtn').click();
  await new Promise(r=>setTimeout(r,220));

  const card = document.getElementById('panchangCard');

  html2canvas(card, {
    scale: 2,
    useCORS: true,
    allowTaint: false,
    backgroundColor: '#ffffff',
    width: parseInt(getComputedStyle(card).width),
    height: parseInt(getComputedStyle(card).height)
  }).then(canvas=>{
    canvas.toBlob(blob=>{
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      const name = (document.getElementById('nameInput').value||'panchang').replace(/\s+/g,'_');
      const d = new Date();
      a.download = `panchang_${d.getFullYear()}${String(d.getMonth()+1).padStart(2,'0')}${String(d.getDate()).padStart(2,'0')}_${name}.png`;
      a.href = url; document.body.appendChild(a); a.click(); a.remove();
      setTimeout(()=>URL.revokeObjectURL(url),500);
    }, 'image/png');
