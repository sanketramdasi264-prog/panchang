<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§Ü‡§ú‡§ö‡•á ‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;600;700;900&family=Tiro+Devanagari+Sanskrit&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        body {
            margin: 0;
            background: #1b5e20;
            display: flex;
            justify-content: center;
            padding: 20px;
            font-family: 'Noto Sans Devanagari', sans-serif;
        }

        #panchangCard {
            width: 1080px;
            height: 1920px;
            background: white;
            position: relative;
            box-shadow: 0 0 40px rgba(0,0,0,0.4);
        }

        .top-header {
            height: 280px;
            background: #ffffff;
            border-bottom: 8px solid #ffd700;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 40px;
            position: relative;
        }

        .left-info {
            text-align: left;
        }

        .left-info .title {
            font-size: 52px;
            font-weight: 900;
            color: #000;
        }

        .left-info .date {
            font-size: 46px;
            font-weight: 900;
            color: #c62828;
            margin-top: 10px;
        }

        .left-info .day {
            font-size: 40px;
            font-weight: 700;
            color: #d32f2f;
            margin-top: 5px;
        }

        .ganesh-center {
            position: absolute;
            left: 50%;
            top: 40px;
            transform: translateX(-50%);
            width: 260px;
            height: 260px;
        }

        .ganesh-center img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            filter: drop-shadow(0 6px 18px rgba(0,0,0,0.5));
        }

        .logo-right {
            width: 180px;
            height: 180px;
        }

        .logo-right img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .shake-section {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #d32f2f, #b71c1c);
            color: white;
            border-bottom: 8px solid #ffd700;
        }

        .shake-section h2 {
            font-size: 54px;
            font-weight: 900;
        }

        .shake-section p {
            font-size: 40px;
            margin-top: 12px;
        }
        .sun-section {
            padding: 40px 20px;
            background: linear-gradient(135deg, #1565c0, #0d47a1);
            border-bottom: 8px solid #ffd700;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .sun-box {
            display: flex;
            align-items: center;
            gap: 20px;
            background: rgba(255,255,255,0.15);
            padding: 20px 40px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
        }

        .sun-icon {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .sun-text {
            color: white;
        }

        .sun-text h4 {
            font-size: 32px;
            margin: 0;
        }

        .sun-text .time {
            font-size: 46px;
            font-weight: 900;
            color: #ffea00;
        }

        .table-section {
            padding: 30px 20px;
            background: #fff8e1;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            border: 6px solid #ff9800;
        }

        th, td {
            padding: 22px;
            border: 3px solid #ff9800;
            text-align: center;
        }

        th {
            background: linear-gradient(135deg, #ffd700, #ffb300);
            font-size: 40px;
            color: #b71c1c;
            font-weight: 900;
        }

        td {
            font-size: 38px;
            font-weight: 700;
        }

        .rashi-section {
            padding: 40px;
            background: white;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
        }

        .rashi-box {
            border: 5px solid #ff9800;
            padding: 30px 20px;
            text-align: center;
            border-radius: 20px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.2);
        }

        .rashi-box .icon {
            font-size: 70px;
            margin-bottom: 10px;
        }

        .rashi-box .label {
            color: #444;
            font-size: 32px;
        }

        .rashi-box .value {
            color: #c62828;
            font-size: 48px;
            font-weight: 900;
            margin-top: 10px;
        }

        .footer {
            background: #5a0e0e;
            padding: 30px 40px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 260px;
            border-top: 8px solid #ffd700;
        }

        .footer-info {
            flex: 1;
        }

        .footer-info .name {
            font-size: 58px;
            font-weight: 900;
            color: #ffeb3b;
        }

        .footer-info .office {
            font-size: 40px;
            margin-top: 10px;
        }

        .footer-info .contact {
            font-size: 36px;
            margin-top: 10px;
        }

        .footer-photo {
            width: 260px;
            height: 330px;
            border-radius: 12px;
            border: 8px solid #ffd700;
            object-fit: cover;
            box-shadow: 0 6px 18px rgba(0,0,0,0.4);
        }

        @media (max-width: 768px) {
            #panchangCard {
                transform: scale(0.48);
                transform-origin: top center;
            }
        }
    </style>
</head>
<body>

<div id="panchangCard">

    <div class="top-header">
        <div class="left-info">
            <div class="title">‡§Ü‡§ú‡§ö‡•á ‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó</div>
            <div class="date" id="hdrDate">--</div>
            <div class="day" id="hdrDay">--</div>
        </div>

        <div class="ganesh-center">
            <img src="https://raw.githubusercontent.com/sanketramdasi264-prog/panchang/main/pngtree-artistic-vinayaka-chavithi-celebrations-for-ganesh-chaturthi-bal-free-transparent-png-image_14089909.png" />
        </div>

        <div class="logo-right">
            <img src="https://blogger.googleusercontent.com/img/a/AVvXsEghUXDnRLeFXsuapWEpRem_Mtzst5Ae9zlttWprP9nI7dQ_Rh41nkHP3PqCiHrZo1YKUiMvbHaPZC6VZEBCSvuAvzQOVF7MxUon4i3Hdko0qGWwyl4BQ44KeAe-6qQACSUB8k-3wdI6N2Bt-8xsQSQnHW-a2AMw9SwT0hK4b5Ej5zmN_anbnY1pX2TC9pwR=s500">
        </div>
    </div>

    <div class="shake-section">
        <h2 id="shakeMain">‡§∂‡§æ‡§≤‡§ø‡§µ‡§æ‡§π‡§® ‡§∂‡§ï‡•á ‡•ß‡•Ø‡•™‡•≠</h2>
        <p id="shakeSub">‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§µ‡§∏‡•Å‡§®‡§æ‡§Æ‡§∏‡§Ç‡§µ‡§§‡•ç‡§∏‡§∞, ‡§¶‡§ï‡•ç‡§∑‡§ø‡§£‡§æ‡§Ø‡§®...</p>
    </div>

    <div class="sun-section">
        <div class="sun-box">
            <div class="sun-icon">üåÖ</div>
            <div class="sun-text">
                <h4>‡§∏‡•Ç‡§∞‡•ç‡§Ø‡•ã‡§¶‡§Ø</h4>
                <div class="time" id="sunrise">--</div>
            </div>
        </div>

        <div class="sun-box">
            <div class="sun-icon">üåÑ</div>
            <div class="sun-text">
                <h4>‡§∏‡•Ç‡§∞‡•ç‡§Ø‡§æ‡§∏‡•ç‡§§</h4>
                <div class="time" id="sunset">--</div>
            </div>
        </div>
    </div>

    <div class="table-section">
        <table>
            <thead>
                <tr>
                    <th>üïâ</th>
                    <th>‡§§‡§§‡•ç‡§§‡•ç‡§µ</th>
                    <th>‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä</th>
                    <th>‡§µ‡•á‡§≥</th>
                    <th>‡§®‡§Ç‡§§‡§∞</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>üïâ</td>
                    <td>‡§§‡§ø‡§•‡•Ä</td>
                    <td id="tblTithi">--</td>
                    <td id="tblTithiEnd">--</td>
                    <td id="tblTithiNext">--</td>
                </tr>
                <tr>
                    <td>üïâ</td>
                    <td>‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞</td>
                    <td id="tblNak">--</td>
                    <td id="tblNakEnd">--</td>
                    <td id="tblNakNext">--</td>
                </tr>
                <tr>
                    <td>üïâ</td>
                    <td>‡§Ø‡•ã‡§ó</td>
                    <td id="tblYog">--</td>
                    <td id="tblYogTime">--</td>
                    <td id="tblYogNext">--</td>
                </tr>
                <tr>
                    <td>üïâ</td>
                    <td>‡§ï‡§∞‡§£</td>
                    <td id="tblKar">--</td>
                    <td id="tblKarEnd">--</td>
                    <td id="tblKarNext">--</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="rashi-section">
        <div class="rashi-box">
            <div class="icon">üåô</div>
            <div class="label">‡§ö‡§Ç‡§¶‡•ç‡§∞ ‡§∞‡§æ‡§∂‡•Ä</div>
            <div class="value" id="rashiMoon">--</div>
        </div>
        <div class="rashi-box">
            <div class="icon">‚òÄÔ∏è</div>
            <div class="label">‡§∏‡•Ç‡§∞‡•ç‡§Ø ‡§∞‡§æ‡§∂‡•Ä</div>
            <div class="value" id="rashiSun">--</div>
        </div>
        <div class="rashi-box">
            <div class="icon">‚≠ê</div>
            <div class="label">‡§ó‡•Å‡§∞‡•Å ‡§∞‡§æ‡§∂‡•Ä</div>
            <div class="value" id="rashiGuru">--</div>
        </div>
    </div>
    <div class="footer">
        <div class="footer-info">
            <div class="name" id="userNameBox"></div>
            <div class="office" id="userOfficeBox"></div>
            <div class="contact" id="userContactBox"></div>
        </div>

        <img id="userPhotoBox" class="footer-photo" style="display:none;">
    </div>

</div>

<script>
async function loadPanchang() {
    let today = new Date();
    let y = today.getFullYear();
    let m = String(today.getMonth() + 1).padStart(2, "0");
    let d = String(today.getDate()).padStart(2, "0");
    let key = `${y}-${m}-${d}`;

    let url = "https://sanketramdasi264-prog.github.io/panchang/panchang.json";

    let data = await fetch(url).then(r => r.json()).catch(e => null);

    if (!data || !data[key]) return;

    let p = data[key];

    document.getElementById("hdrDate").textContent = `${d}-${m}-${y}`;
    document.getElementById("hdrDay").textContent = ["‡§∞‡§µ‡§ø‡§µ‡§æ‡§∞","‡§∏‡•ã‡§Æ‡§µ‡§æ‡§∞","‡§Æ‡§Ç‡§ó‡§≥‡§µ‡§æ‡§∞","‡§¨‡•Å‡§ß‡§µ‡§æ‡§∞","‡§ó‡•Å‡§∞‡•Å‡§µ‡§æ‡§∞","‡§∂‡•Å‡§ï‡•ç‡§∞‡§µ‡§æ‡§∞","‡§∂‡§®‡§ø‡§µ‡§æ‡§∞"][today.getDay()];

    document.getElementById("shakeMain").textContent = p.shalivahan;
    document.getElementById("shakeSub").textContent = p.shalivahan_meta;

    document.getElementById("sunrise").textContent = p.sunrise;
    document.getElementById("sunset").textContent = p.sunset;

    document.getElementById("tblTithi").textContent = p.tithi;
    document.getElementById("tblTithiEnd").textContent = p.tithi_end;
    document.getElementById("tblTithiNext").textContent = p.tithi_next;

    document.getElementById("tblNak").textContent = p.nakshatra;
    document.getElementById("tblNakEnd").textContent = p.nakshatra_end;
    document.getElementById("tblNakNext").textContent = p.nakshatra_next;

    document.getElementById("tblYog").textContent = p.yog;
    document.getElementById("tblYogTime").textContent = p.yog_time;
    document.getElementById("tblYogNext").textContent = p.yog_next;

    document.getElementById("tblKar").textContent = p.karan;
    document.getElementById("tblKarEnd").textContent = p.karan_end;
    document.getElementById("tblKarNext").textContent = p.karan_next;

    document.getElementById("rashiMoon").textContent = p.moon_rashi;
    document.getElementById("rashiSun").textContent = p.sun_rashi;
    document.getElementById("rashiGuru").textContent = p.guru_rashi;
}

loadPanchang();

let userInputName = "";
let userInputOffice = "";
let userInputContact = "";
let userPhotoData = "";

function updateFooter() {
    document.getElementById("userNameBox").textContent = userInputName;
    document.getElementById("userOfficeBox").textContent = userInputOffice;
    document.getElementById("userContactBox").textContent = userInputContact;

    if (userPhotoData) {
        let img = document.getElementById("userPhotoBox");
        img.src = userPhotoData;
        img.style.display = "block";
    }
}

function downloadCard() {
    updateFooter();

    html2canvas(document.querySelector("#panchangCard"), {
        scale: 2,
        useCORS: true
    }).then(canvas => {
        let link = document.createElement("a");
        link.download = "panchang.png";
        link.href = canvas.toDataURL();
        link.click();
    });
}

document.body.insertAdjacentHTML("beforeend", `
<style>
#inputPanel {
    position: fixed;
    top: 20px;
    right: 20px;
    background: white;
    padding: 20px;
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
    border-radius: 12px;
    width: 320px;
    z-index: 9999;
}
#inputPanel input { width:100%; padding:10px; margin-bottom:10px; font-size:18px; }
#inputPanel button { width:100%; padding:12px; background:#c62828; color:white; font-size:20px; border:none; border-radius:10px; }
</style>

<div id="inputPanel">
    <input id="nameInput" placeholder="‡§Ü‡§™‡§≤‡•á ‡§®‡§æ‡§µ" />
    <input id="officeInput" placeholder="‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø ‡§®‡§æ‡§µ" />
    <input id="contactInput" placeholder="‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï" />
    <input type="file" id="userPhoto" accept="image/*" />
    <button onclick="downloadCard()">Download Panchang</button>
</div>
`);

document.getElementById("nameInput").oninput = e => userInputName = e.target.value;
document.getElementById("officeInput").oninput = e => userInputOffice = e.target.value;
document.getElementById("contactInput").oninput = e => userInputContact = e.target.value;

document.getElementById("userPhoto").onchange = e => {
    let file = e.target.files[0];
    let reader = new FileReader();
    reader.onload = () => userPhotoData = reader.result;
    reader.readAsDataURL(file);
};
</script>

</body>
</html>
